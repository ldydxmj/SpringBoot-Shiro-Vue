(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["bookSearch"],{"01cb":function(t,e,a){"use strict";var i=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"adCard ml"},[a("div",{staticClass:"titleWarp flex align-items"},[a("img",{staticClass:"smallImg",attrs:{src:this.adData.cover_small_path}}),a("div",{staticClass:"title font16 ml"},[t._v(t._s(this.adData.title))])]),a("div",{staticClass:"des pt pb color6"},[t._v(t._s(this.adData.desc))]),a("div",{staticClass:"mianImgWrap"},[a("img",{staticClass:"mianImg",attrs:{src:this.adData.cover_big_path},on:{click:t.handleGoAd}}),a("span",{staticClass:"adFlag "},[t._v("广告")])]),a("div",{staticClass:"bottom"},[a("span",{staticClass:"bottomBtn pa ma ripple",on:{click:t.handleGoAd}},[t._v("查看详情")])])])},n=[],s=(a("b54a"),a("e7e5"),a("d399")),r=a("fa7d");r["j"];var o={data:function(){return{}},props:{adData:{}},mounted:function(){},components:{},methods:{routerPush:r["j"],handleGoAd:function(){var t=Object(r["e"])(this.adData);this.$store.dispatch("adsComponent/adClick",{postData:{ad_id:this.adData.id,category_id:this.adData.category_id,u:Object(r["f"])()},callback:function(){t?window.location.href=t:Object(s["default"])("没有跳转/下载链接")}}),this.adData.link?window.location.href=this.adData.link:Object(s["default"])("没有跳转/下载链接")}},computed:{}},c=o,l=(a("dfb4"),a("2877")),f=Object(l["a"])(c,i,n,!1,null,"2847df8b",null);e["a"]=f.exports},"03ba":function(t,e,a){},"0d9c":function(t,e,a){"use strict";var i=a("bbfc"),n=a.n(i);n.a},1146:function(t,e,a){},"1c4c":function(t,e,a){"use strict";var i=a("9b43"),n=a("5ca1"),s=a("4bf8"),r=a("1fa8"),o=a("33a4"),c=a("9def"),l=a("f1ae"),f=a("27ee");n(n.S+n.F*!a("5cc5")((function(t){Array.from(t)})),"Array",{from:function(t){var e,a,n,u,d=s(t),h="function"==typeof this?this:Array,p=arguments.length,v=p>1?arguments[1]:void 0,b=void 0!==v,g=0,m=f(d);if(b&&(v=i(v,p>2?arguments[2]:void 0,2)),void 0==m||h==Array&&o(m))for(e=c(d.length),a=new h(e);e>g;g++)l(a,g,b?v(d[g],g):d[g]);else for(u=m.call(d),a=new h;!(n=u.next()).done;g++)l(a,g,b?r(u,v,[n.value,g],!0):n.value);return a.length=g,a}})},"1dd0":function(t,e,a){"use strict";var i=a("f4ad"),n=a.n(i);n.a},2694:function(t,e,a){"use strict";var i=a("03ba"),n=a.n(i);n.a},2994:function(t,e,a){"use strict";a("68ef"),a("e3b3"),a("c0c2")},"2bdd":function(t,e,a){t.exports=a("86ab")(109)},3990:function(t,e,a){"use strict";a.r(e);var i,n=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{ref:"scrollWrap",staticClass:"bookSearch"},[a("LoadingComponent",{attrs:{isShow:t.loading}}),a("Header",{attrs:{isShowEmpty:!1,isMarginLeft:!1}},[a("van-search",{staticClass:"vSearch",attrs:{background:"transparent",placeholder:"请输入搜索关键词","show-action":"",shape:"round"},on:{search:t.onSearch},model:{value:t.searchValue,callback:function(e){t.searchValue=e},expression:"searchValue"}},[a("div",{staticClass:"vAction",attrs:{slot:"action"},on:{click:t.onSearch},slot:"action"},[t._v("搜索")])])],1),t.isSearched?a("div",{staticClass:"main"},[a("div",{staticClass:"list pl pr pt"},[t.showList?a("van-list",{attrs:{finished:t.finished,"finished-text":"没有更多了"},on:{load:t.fetchList},model:{value:t.loading,callback:function(e){t.loading=e},expression:"loading"}},t._l(t.list,(function(e){return a("listItem",{key:e.id,attrs:{bookData:e,kind:4},on:{emitJoin:t.join}})})),1):a("EmptyList")],1)]):a("div",{staticClass:"main"},[a("div",{staticClass:"hot pl pr pt"},[a("div",{staticClass:"flex justify-between"},[a("div",{staticClass:"title"},[t._v("热门搜索")]),a("div",{staticClass:"flex color9 ripple",on:{click:t.changeHot}},[a("svg",{staticClass:"icon icon-back iconStart",attrs:{"aria-hidden":"true"}},[a("use",{attrs:{"xlink:href":"#icon-huanyihuan"}})]),t._v("  换一换\n                ")])]),a("div",{staticClass:"flex justify-between hotItemWarp"},t._l(t.hotSearchList,(function(e,i){return a("div",{key:i,staticClass:"hotItem ripple pt pb color9",on:{click:function(a){return t.handleHistory(e)}}},[t._v(t._s(e))])})),0)]),a("div",{staticClass:"history pl pr pt"},[a("div",{staticClass:"flex justify-between"},[a("div",{staticClass:"title"},[t._v("搜索历史")]),a("div",{staticClass:"color9 ripple",on:{click:t.clearHistory}},[t._v("清空历史")])]),a("div",{staticClass:"flex historyItemWarp"},t._l(t.searchHistoryList,(function(e,i){return a("div",{key:i,staticClass:"historyItem ripple pa ma color9",on:{click:function(a){return t.handleHistory(e)}}},[t._v(t._s(e))])})),0)]),a("div",{staticClass:"mar"}),t.adDataCard&&t.adDataCard.id?a("adCard",{attrs:{adData:t.adDataCard}}):t._e()],1)],1)},s=[],r=(a("8e6e"),a("456d"),a("c5f6"),a("75fc")),o=(a("7514"),a("4f7f"),a("5df3"),a("1c4c"),a("20d6"),a("ac6a"),a("e7e5"),a("d399")),c=a("bd86"),l=(a("2994"),a("2bdd")),f=(a("5852"),a("d961")),u=(a("7f7f"),a("66b9"),a("b650")),d=a("fa7d"),h=a("63de"),p=a("bd61"),v=a("ad07"),b=a("0130"),g=a("2cf0"),m=a("ebde"),y=(a("fa68"),a("01cb")),_=a("2f62"),k=a("b738"),O=a.n(k);function S(t,e){var a=Object.keys(t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);e&&(i=i.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),a.push.apply(a,i)}return a}function C(t){for(var e=1;e<arguments.length;e++){var a=null!=arguments[e]?arguments[e]:{};e%2?S(Object(a),!0).forEach((function(e){Object(c["a"])(t,e,a[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(a)):S(Object(a)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(a,e))}))}return t}var j=new O.a,w=Object(_["createNamespacedHelpers"])("bookSearch"),D=w.mapState,L=w.mapActions,x=w.mapMutations,E={name:"bookSearch",data:function(){return{searchHistoryList:[]}},components:(i={listItem:h["a"],bookItem:g["a"],Header:p["a"],LoadingComponent:b["a"],EmptyList:m["a"],adCard:y["a"],panel:v["a"]},Object(c["a"])(i,u["default"].name,u["default"]),Object(c["a"])(i,f["default"].name,f["default"]),Object(c["a"])(i,l["default"].name,l["default"]),i),inject:["isLogin"],mounted:function(){this.init(),Object(d["k"])("搜索")},destroyed:function(){this.setState({searchInfo:{auther:"",title:"",keyword:"",k:"",page:1},isSearched:!1})},computed:C({},D(["lastPage","pageNo","list","finished","isSearched","hotSearchList","loading","orginList","pagination","favouriteList","adDataCard"]),{loading:{get:function(){return this.$store.state.bookSearch.loading},set:function(){}},searchValue:{get:function(){return this.$store.state.bookSearch.searchInfo.k},set:function(t){var e=this.$store.state.bookSearch.searchInfo;e.k=t,this.setState({searchInfo:e})}},showList:function(){return this.list&&this.list.length}}),methods:C({},L(["getAdsDetail","getHotSearchList","getBookSearch","getfavouriteList","addSubscribe"]),{},x(["setState"]),{init:function(){var t=this;this.isLogin(!0)?this.getfavouriteList({postData:{},callback:function(){t.doGetData()}}):this.doGetData(),this.getAdsDetail({postData:{type:"adDataCard",category_id:4,u:Object(d["f"])()}})},join:function(t){var e=this;this.isLogin()&&this.addSubscribe({postData:{novel_ids:t.id,action:"add"},callback:function(){Object(o["default"])("加入成功!"),e.getfavouriteList({postData:{},callback:function(t){var a=e.list;t&&t.length&&(a.forEach((function(e){var a=t.findIndex((function(t){return t.id===e.id}));e.hasJoined=a>-1})),e.setState({list:a}))}})}})},doGetData:function(){var t=this,e=this.$route.query;if(e.auther||e.title||e.keyword){var a={};e.auther&&(a.auther=e.auther),e.title&&(a.title=e.title),e.keyword&&(a.keyword=e.keyword),a.k="",this.getBookSearch({postData:C({},a,{page:1})})}else{this.getHotSearchList({postData:{},callback:function(e){if(e.length>10){for(var a=[],i=0;i<10;i++)a.push(e.splice(Math.random()*e.length,1)[0]);t.setState({hotSearchList:a})}else t.setState({hotSearchList:e})}});var i=j.get("searchHistoryList");i&&i.length&&(this.searchHistoryList=Array.from(new Set(i)))}},handleHistory:function(t){var e={k:t,page:1};if(t){var a=j.get("searchHistoryList")||[];a.find((function(e){return e===t}))||a.push(t),j.set("searchHistoryList",a)}this.getBookSearch({postData:e})},clearHistory:function(){j.set("searchHistoryList",[]),this.searchHistoryList=[],Object(o["default"])("历史搜索已清空!")},emitJoin:function(){},changeHot:function(){var t=Object(r["a"])(new Set(this.orginList));if(t&&t.length>10){for(var e=[],a=0;a<10;a++)e.push(t.splice(Math.random()*t.length,1)[0]);this.setState({hotSearchList:e})}else this.setState({hotSearchList:t})},onSearch:function(){if(console.log("TCL",this.searchValue,"dd"),this.searchValue){var t=this.searchValue,e={k:t,page:1};if(t){var a=j.get("searchHistoryList")||[];a.push(t),j.set("searchHistoryList",a)}this.getBookSearch({postData:e})}else Object(o["default"])("请输入搜索词!")},onCancel:function(){var t=this.$store.state.bookSearch.searchInfo;t.k="",this.setState({searchInfo:t,searchValue:""})},fetchList:function(){if(!this.pagination||!1!==this.pagination.has_next){var t=this.$store.state.bookSearch.searchInfo;this.getBookSearch({postData:C({},t,{page:Number(this.pagination.page)+1}),isConcat:!0})}}})},H=E,I=(a("2694"),a("0d9c"),a("2877")),P=Object(I["a"])(H,n,s,!1,null,"56b1c5b3",null);e["default"]=P.exports},"4f7f":function(t,e,a){"use strict";var i=a("c26b"),n=a("b39a"),s="Set";t.exports=a("e0b8")(s,(function(t){return function(){return t(this,arguments.length>0?arguments[0]:void 0)}}),{add:function(t){return i.def(n(this,s),t=0===t?0:t,t)}},i)},5852:function(t,e,a){"use strict";a("68ef"),a("9d70"),a("3743"),a("1a04"),a("1146"),a("f032")},"5df3":function(t,e,a){"use strict";var i=a("02f4")(!0);a("01f9")(String,"String",(function(t){this._t=String(t),this._i=0}),(function(){var t,e=this._t,a=this._i;return a>=e.length?{value:void 0,done:!0}:(t=i(e,a),this._i+=t.length,{value:t,done:!1})}))},"67ab":function(t,e,a){var i=a("ca5a")("meta"),n=a("d3f4"),s=a("69a8"),r=a("86cc").f,o=0,c=Object.isExtensible||function(){return!0},l=!a("79e5")((function(){return c(Object.preventExtensions({}))})),f=function(t){r(t,i,{value:{i:"O"+ ++o,w:{}}})},u=function(t,e){if(!n(t))return"symbol"==typeof t?t:("string"==typeof t?"S":"P")+t;if(!s(t,i)){if(!c(t))return"F";if(!e)return"E";f(t)}return t[i].i},d=function(t,e){if(!s(t,i)){if(!c(t))return!0;if(!e)return!1;f(t)}return t[i].w},h=function(t){return l&&p.NEED&&c(t)&&!s(t,i)&&f(t),t},p=t.exports={KEY:i,NEED:!1,fastKey:u,getWeak:d,onFreeze:h}},a8c4:function(t,e,a){},ad07:function(t,e,a){"use strict";var i,n=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"panel pr"},[a("van-panel",[t.hasHeader?a("div",{attrs:{slot:"header"},slot:"header"},[a("div",{class:["flex justify-between header align-items"]},[a("span",{class:["pl panelName",t.hasBorderLeft?"borderLeft":null]},[t._v(t._s(this.panelName))]),this.hasMore?a("em",{staticClass:"flex align-items pl mt pb ripple",on:{click:t.handleMore}},[t._v("\n                    更多\n                    "),a("svg",{staticClass:"icon"},[a("use",{attrs:{"xlink:href":"#icon-right"}})])]):t._e(),t.isSameRecomed?a("div",{staticClass:"flex align-items ripple",on:{click:t.handleChange}},[a("svg",{staticClass:"icon"},[a("use",{attrs:{"xlink:href":"#icon-huanyihuan"}})]),a("span",{staticClass:"ml mr"},[t._v("换一批")])]):t._e()])]):a("div",{attrs:{slot:"header"},slot:"header"}),a("div",{attrs:{slot:"default"},slot:"default"},[t._t("default")],2)])],1)},s=[],r=(a("8e6e"),a("ac6a"),a("456d"),a("bd86")),o=(a("2b28"),a("9ed2")),c=(a("7f7f"),a("3647"),a("ea47")),l=a("2f62");function f(t,e){var a=Object.keys(t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);e&&(i=i.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),a.push.apply(a,i)}return a}function u(t){for(var e=1;e<arguments.length;e++){var a=null!=arguments[e]?arguments[e]:{};e%2?f(Object(a),!0).forEach((function(e){Object(r["a"])(t,e,a[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(a)):f(Object(a)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(a,e))}))}return t}var d={props:{hasBorderLeft:{type:Boolean,default:!0},isSameRecomed:{type:Boolean,default:!1},panelName:{type:String,default:""},hasHeader:{type:Boolean,default:!0},hasMore:{type:Boolean,default:!0}},components:(i={},Object(r["a"])(i,c["default"].name,c["default"]),Object(r["a"])(i,o["default"].name,o["default"]),i),methods:u({handleMore:function(){this.$emit("handleMore")},handleChange:function(){this.$emit("change")},showGood:function(t){this.setGood(t),this.$router.push("/Good")}},Object(l["mapMutations"])({setGood:"SET_GOOD_MUTATION"})),mounted:function(){}},h=d,p=(a("1dd0"),a("2877")),v=Object(p["a"])(h,n,s,!1,null,"607fffe3",null);e["a"]=v.exports},b11a:function(t,e,a){},b39a:function(t,e,a){var i=a("d3f4");t.exports=function(t,e){if(!i(t)||t._t!==e)throw TypeError("Incompatible receiver, "+e+" required!");return t}},bbfc:function(t,e,a){},c0c2:function(t,e,a){},c26b:function(t,e,a){"use strict";var i=a("86cc").f,n=a("2aeb"),s=a("dcbc"),r=a("9b43"),o=a("f605"),c=a("4a59"),l=a("01f9"),f=a("d53b"),u=a("7a56"),d=a("9e1e"),h=a("67ab").fastKey,p=a("b39a"),v=d?"_s":"size",b=function(t,e){var a,i=h(e);if("F"!==i)return t._i[i];for(a=t._f;a;a=a.n)if(a.k==e)return a};t.exports={getConstructor:function(t,e,a,l){var f=t((function(t,i){o(t,f,e,"_i"),t._t=e,t._i=n(null),t._f=void 0,t._l=void 0,t[v]=0,void 0!=i&&c(i,a,t[l],t)}));return s(f.prototype,{clear:function(){for(var t=p(this,e),a=t._i,i=t._f;i;i=i.n)i.r=!0,i.p&&(i.p=i.p.n=void 0),delete a[i.i];t._f=t._l=void 0,t[v]=0},delete:function(t){var a=p(this,e),i=b(a,t);if(i){var n=i.n,s=i.p;delete a._i[i.i],i.r=!0,s&&(s.n=n),n&&(n.p=s),a._f==i&&(a._f=n),a._l==i&&(a._l=s),a[v]--}return!!i},forEach:function(t){p(this,e);var a,i=r(t,arguments.length>1?arguments[1]:void 0,3);while(a=a?a.n:this._f){i(a.v,a.k,this);while(a&&a.r)a=a.p}},has:function(t){return!!b(p(this,e),t)}}),d&&i(f.prototype,"size",{get:function(){return p(this,e)[v]}}),f},def:function(t,e,a){var i,n,s=b(t,e);return s?s.v=a:(t._l=s={i:n=h(e,!0),k:e,v:a,p:i=t._l,n:void 0,r:!1},t._f||(t._f=s),i&&(i.n=s),t[v]++,"F"!==n&&(t._i[n]=s)),t},getEntry:b,setStrong:function(t,e,a){l(t,e,(function(t,a){this._t=p(t,e),this._k=a,this._l=void 0}),(function(){var t=this,e=t._k,a=t._l;while(a&&a.r)a=a.p;return t._t&&(t._l=a=a?a.n:t._t._f)?f(0,"keys"==e?a.k:"values"==e?a.v:[a.k,a.v]):(t._t=void 0,f(1))}),a?"entries":"values",!a,!0),u(e)}}},d0f4:function(t,e,a){"use strict";var i=a("a8c4"),n=a.n(i);n.a},d961:function(t,e,a){t.exports=a("86ab")(121)},dfb4:function(t,e,a){"use strict";var i=a("b11a"),n=a.n(i);n.a},e0b8:function(t,e,a){"use strict";var i=a("7726"),n=a("5ca1"),s=a("2aba"),r=a("dcbc"),o=a("67ab"),c=a("4a59"),l=a("f605"),f=a("d3f4"),u=a("79e5"),d=a("5cc5"),h=a("7f20"),p=a("5dbc");t.exports=function(t,e,a,v,b,g){var m=i[t],y=m,_=b?"set":"add",k=y&&y.prototype,O={},S=function(t){var e=k[t];s(k,t,"delete"==t?function(t){return!(g&&!f(t))&&e.call(this,0===t?0:t)}:"has"==t?function(t){return!(g&&!f(t))&&e.call(this,0===t?0:t)}:"get"==t?function(t){return g&&!f(t)?void 0:e.call(this,0===t?0:t)}:"add"==t?function(t){return e.call(this,0===t?0:t),this}:function(t,a){return e.call(this,0===t?0:t,a),this})};if("function"==typeof y&&(g||k.forEach&&!u((function(){(new y).entries().next()})))){var C=new y,j=C[_](g?{}:-0,1)!=C,w=u((function(){C.has(1)})),D=d((function(t){new y(t)})),L=!g&&u((function(){var t=new y,e=5;while(e--)t[_](e,e);return!t.has(-0)}));D||(y=e((function(e,a){l(e,y,t);var i=p(new m,e,y);return void 0!=a&&c(a,b,i[_],i),i})),y.prototype=k,k.constructor=y),(w||L)&&(S("delete"),S("has"),b&&S("get")),(L||j)&&S(_),g&&k.clear&&delete k.clear}else y=v.getConstructor(e,t,b,_),r(y.prototype,a),o.NEED=!0;return h(y,t),O[t]=y,n(n.G+n.W+n.F*(y!=m),O),g||v.setStrong(y,t,b),y}},ebde:function(t,e,a){"use strict";var i=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"EmptyList"},[t._t("default",[a("div",{staticClass:"flex justify-center color9 wrap"},[a("svg",{staticClass:"icon icon-back iconStart",attrs:{"aria-hidden":"true"}},[a("use",{attrs:{"xlink:href":"#iconxingxing"}})]),a("div",{staticClass:"mt pt"},[t._v("~~列表空空的~~")]),a("div",{staticClass:"pa ma go",on:{click:t.goIndex}},[t._v("去逛逛")])])])],2)},n=[],s=a("fa7d"),r={props:{},data:function(){return{}},components:{},computed:{},methods:{goIndex:function(){Object(s["j"])(this.$router,{path:"/"})}}},o=r,c=(a("d0f4"),a("2877")),l=Object(c["a"])(o,i,n,!1,null,"063c5b90",null);e["a"]=l.exports},f032:function(t,e,a){},f4ad:function(t,e,a){}}]);